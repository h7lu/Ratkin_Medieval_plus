<?xml version="1.0" encoding="utf-8"?>
<Defs>

  <!-- RkM: Teaching ritual behavior (copied/tweaked from DateRitualBehavior) -->
  <RitualBehaviorDef Name="RKM_TeachingBehavior">
    <defName>RKM_TeachingBehavior</defName>
  <workerClass>RkM.RitualBehaviorWorker_Teaching</workerClass>
  <!-- 4 in-game hours = 4 * 2500 ticks = 10000 ticks -->
  <durationTicks>10000</durationTicks>
    <roles>
      <li Class="RitualRoleTag">
        <label>lecturer</label>
        <id>teacher</id>
        <required>True</required>
        <substitutable>True</substitutable>
        <maxCount>1</maxCount>
        <countsAsParticipant>False</countsAsParticipant>
        <allowChild>false</allowChild>
        <mustBeAbleToReachTarget>True</mustBeAbleToReachTarget>
      </li>
    </roles>
    <spectatorsLabel>Students</spectatorsLabel>
    <spectatorGerund>attend</spectatorGerund>
    <stages>
      <li>
        <defaultDuty>Spectate</defaultDuty>
        <essential>True</essential>
        <endTriggers>
          <li Class="StageEndTrigger_DurationPercentage">
            <percentage>1.0</percentage>
          </li>
        </endTriggers>
        <postAction Class="RitualStageAction_Message">
          <text>{0}: The teaching session is over, and the group is dispersing.</text>
          <messageTypeDef>NeutralEvent</messageTypeDef>
        </postAction>
        <roleBehaviors>
          <li>
            <roleId>teacher</roleId>
            <!-- GiveSpeech is defined in Core (Duties_Gatherings.xml) â€” no DLC required.
                 SpeakOnCellFacingSpectators was Ideology-only; GiveSpeech makes the
                 teacher walk to their spot and perform a speech-giving job identically. -->
            <dutyDef>GiveSpeech</dutyDef>
            <!-- speakerInteraction removed: Speech_DateRitual is Ideology-only.
                 The ritual functions correctly without a speaker interaction. -->
            <customPositions>
              <!-- RitualPosition_GrandLectern is our own class (mirrors vanilla
                   RitualPosition_Lectern but points at RKM_GrandLectern).
                   It positions the teacher in front of the nearest Grand Lectern.
                   If Ideology is also loaded and the vanilla Lectern is also nearby,
                   a second customPosition entry can be added via patch. -->
              <li Class="RkM.RitualPosition_GrandLectern">
                <maxDistanceToFocus>5</maxDistanceToFocus>
              </li>
            </customPositions>
          </li>
        </roleBehaviors>
      </li>
    </stages>
  </RitualBehaviorDef>

</Defs>
